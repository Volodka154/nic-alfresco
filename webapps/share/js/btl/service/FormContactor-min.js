define(["dojo/_base/declare","alfresco/core/Core","dojo/_base/lang","btl/widgets/base/ClassicWindow"],function(c,f,e){return c([f],{contactor:null,cssRequirements:[{cssFile:"./css/validate.css"}],i18nRequirements:[{i18nFile:"./i18n/FormContactor.properties"}],nodeRefContactor:null,constructor:function b(g){e.mixin(this,g);this.alfSubscribe("BTL_CREATE_FORM_CONTACTOR",e.hitch(this,this.onCreateFormContactor))},onCreateFormContactor:function d(g){this.alfLog("log","alfresco_formContactPerson__onCreateFormContactor",g);this.contactor=g.contactor;this.nodeRefContactor=g.alf_destination;var h={};h.dialogTitle=g.config.dialogTitle;h.dialogConfirmationButtonTitle=g.config.dialogConfirmationButtonTitle;h.dialogCancellationButtonTitle=g.config.dialogCancellationButtonTitle;h.formSubmissionTopic=g.config.formSubmissionTopic;h.contentWidth="1050px";h.contentHeight="820px";h.pubSubScope="_FORM_CONTACTOR";h.dialogId="FORM_CONTACTOR";h.widgets=this.getWidgets();this.alfLog("log","alfresco_formContactPerson__onCreateFormContactor",h);this.alfPublish("ALF_CREATE_FORM_DIALOG_REQUEST",h)},getWidgets:function a(){this.alfLog("log","alfresco_formContactor__getWidgets",this);var r=(this.contactor)?this.contactor.nodeRef:"";var i=[{value:"ООО",label:"ООО"},{value:"АО",label:"АО"},{value:"ЗАО",label:"ЗАО"},{value:"ОФО",label:"ОФО"},{value:"ГУП",label:"ГУП"},{value:"ФГУП",label:"ФГУП"},{value:"Физ. лицо",label:"Физ. лицо"}];var A=[];var g={name:"btl/widgets/base/TextBox",config:{name:"nodeRef",value:(this.contactor)?this.contactor.nodeRef:"",visibilityConfig:{initialValue:false}}};var h={name:"btl/widgets/base/TextBox",config:{name:"alf_destination",value:this.nodeRefContactor,visibilityConfig:{initialValue:false}}};var l={name:"btl/widgets/base/TextBox",config:{label:"btl-dic_fullname.title",name:"prop_btl-contr_fullname",style:{width:"950px"},value:(this.contactor)?this.contactor.fullname:""}};var o={name:"alfresco/forms/controls/DojoTextarea",config:{label:"btl-dic_address.title",name:"prop_btl-contr_address",value:(this.contactor)?this.contactor.address:""}};var B={name:"btl/widgets/base/TextBox",config:{label:"Город",name:"prop_btl-contr_city",value:(this.contactor)?this.contactor.city:""}};var s={name:"btl/widgets/base/TextBox",config:{label:"Район",name:"prop_btl-contr_region",value:(this.contactor)?this.contactor.region:""}};var u={name:"btl/widgets/base/TextBox",config:{label:"Область (край, республика)",name:"prop_btl-contr_oblast",value:(this.contactor)?this.contactor.oblast:""}};var y={name:"btl/widgets/base/TextBox",config:{label:"btl-dic_phone.title",name:"prop_btl-contr_phone",value:(this.contactor)?this.contactor.phone:"",requirementConfig:{initialValue:true}}};var D={name:"btl/widgets/base/TextBox",config:{label:"btl-dic_fax.title",name:"prop_btl-contr_fax",value:(this.contactor)?this.contactor.fax:""}};var w={name:"btl/widgets/base/TextBox",config:{label:"btl-dic_email.title",name:"prop_btl-contr_email",value:(this.contactor)?this.contactor.email:""}};var t={name:"btl/widgets/base/TextBox",config:{label:"btl-dic_site.title",name:"prop_btl-contr_site",value:(this.contactor)?this.contactor.site:""}};var E={name:"btl/widgets/base/TextBox",config:{label:"ФИО руководителя",name:"prop_btl-contr_director",value:(this.contactor)?this.contactor.director:""}};var F={name:"btl/widgets/base/TextBox",config:{label:"Должность",name:"prop_btl-contr_position",value:(this.contactor)?this.contactor.position:""}};var k={name:"btl/widgets/base/TextBox",config:{label:"btl-dic_inn.title",name:"prop_btl-contr_inn",value:(this.contactor)?this.contactor.inn:"",style:{width:"160px"},validationConfig:[{validation:"regex",regex:"(^$|(\\d{1,20}))",errorMessage:"btl-dic_inn.error"}]},};var j={name:"btl/widgets/base/TextBox",config:{label:"btl-dic_kpp.title",name:"prop_btl-contr_kpp",value:(this.contactor)?this.contactor.kpp:"",style:{width:"160px"},validationConfig:[{validation:"regex",regex:"(^$|(\\d{1,20}))",errorMessage:"btl-dic_kpp.error"}]},};var G={name:"btl/widgets/base/TextBox",config:{label:"Краткое название",name:"prop_btl-contr_name",value:(this.contactor)?this.contactor.name:"",requirementConfig:{initialValue:true}}};var I={name:"alfresco/forms/controls/DojoCheckBox",config:{fieldId:"SHOW_OTHER_FIELDS",label:"Имеется соглащение о конфидециальности",name:"prop_btl-contr_in_perpetuity",onClickTopic:"SHOW_OTHER_FIELDS",value:(this.contactor)?this.contactor.in_perpetuity:""}};var v={name:"btl/widgets/base/Datepicker",id:"VALID_DATE_CONFIDENTIALITY",config:{additionalCssClasses:"datefield",label:"btl-person_date_confidentiality.title",name:"prop_btl-contr_date_confidentiality",value:(this.contactor)?this.contactor.date_confidentiality:"",disablementConfig:{initialValue:true,rules:[{targetId:"SHOW_OTHER_FIELDS",is:[false]}]}}};var J={name:"btl/widgets/controlFormContactor/Position",config:{value:(this.contactor)?this.contactor.position:"",}};var p={name:"btl/widgets/base/btlChoice",id:"PROP_BTL_CONTR_DIRECTOR",config:{name:"prop_btl-contr_director",fieldId:"CONTR_DIRECTOR",header:"Выбрать руководителя",value:(this.contactor)?this.contactor.director:"",labelText:"ФИО руководителя",labelButton:"Выбрать",urlList:"/share/proxy/alfresco/filters/association",dataUrl:{type:"btl-person:person-content",s_field:"btl-people:fio",extra:"PARENT:'"+r+"'",data:"position",field:"btl-people:fio"},itemUrl:"/share/proxy/alfresco/picker/associationItem",dataItemUrl:{type:"btl-person:person-content",field:"btl-people:fio"}}};var x={name:"alfresco/forms/ControlRow",config:{widgets:[]}};var q={name:"alfresco/forms/ControlColumn",config:{widgets:[]}};var C={name:"alfresco/forms/ControlRow",config:{widgets:[]}};var H={name:"btl/widgets/base/ClassicWindow",config:{title:"Контактное лицо",widgets:[]}};var m={name:"btl/widgets/base/ClassicWindow",config:{title:"Контактная информация",widgets:[]}};var z={name:"btl/widgets/base/ClassicWindow",config:{title:"Дополнительная информация",widgets:[]}};var n={name:"alfresco/forms/ControlColumn",config:{widgets:[]}};C.config.widgets.push(k,j);H.config.widgets.push(p,J);m.config.widgets.push(o,B,s,u,y,D,w,t);z.config.widgets.push(C,G,I,v);(this.contactor)?q.config.widgets.push(H,z):q.config.widgets.push(z);x.config.widgets.push(m,q);n.config.widgets.push(g,h,l);n.config.widgets.push(x);A.push(n);return A}})});