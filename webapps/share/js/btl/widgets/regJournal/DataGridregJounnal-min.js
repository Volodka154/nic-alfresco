define(["dojo/_base/declare","btl/widgets/base/DataGrid","dojo/_base/lang"],function(d,b,f){return d([b],{title:"Список журналов регистрации",Url:"search/regJournal",colModel:[],postMixInProperties:function e(){this.inherited(arguments);this.alfSubscribe("DATAGRID_DELETE_REG_JOURNAL",f.hitch(this,this.deleteregJournal),true);this.alfSubscribe("DATAGRID_GET_REG_JOURNAL_DATA",f.hitch(this,this.getregJournalData),true)},deleteregJournal:function c(){var h=this.grid.pqGrid("selection",{type:"row",method:"getSelection"});if(h&&h.length>0){var j=h[0].rowData;var i={};i.requiresConfirmation=true;i.confirmationTitle="Удаление журнала";i.confirmationPrompt="Вы действительно хотите удалить: "+j.name+" ?";i.url="slingshot/datalists/list/node/"+j.nodeRef.replace("://","/");i.responseTopic="DATAGRID_DELETE_ROW_FROM_STORE",this.alfPublish("ALF_CRUD_DELETE",i,true);this.alfLog("log","alfresco_regJournalDataGrid__deleteregJournal",j)}},getregJournalData:function a(){var h=this.grid.pqGrid("selection",{type:"row",method:"getSelection"});if(h&&h.length>0){var j=h[0].rowData;var i={};i.config={};i.data=j;i.data.rowId=h[0].rowIndx;i.config.dialogTitle="Редактировать журнал";i.config.dialogConfirmationButtonTitle="edit.title";i.config.dialogCancellationButtonTitle="cancel.title";i.config.formSubmissionTopic="BTL_EDIT_REG_JOURNAL";this.alfPublish("BTL_CREATE_FORM_REG_JOURNAL",i,true);this.alfLog("log","alfresco_regJournalDataGrid__getregJournalData",j)}},loadDataToDataGrid:function g(i,h){i.items.forEach(function(l,k,j){if(l.doctype=="0"){i.items[k].typeName="Входящий"}if(l.doctype=="1"){i.items[k].typeName="Исходящий"}if(l.doctype=="2"){i.items[k].typeName="Внутренний"}if(l.doctype=="3"){i.items[k].typeName="НТД"}if(l.doctype=="4"){i.items[k].typeName="Дело проекта"}if(l.doctype=="5"){i.items[k].typeName="Мероприятие"}if(l.doctype=="6"){i.items[k].typeName="ОРД"}if(l.doctype=="7"){i.items[k].typeName="Договор"}if(l.isDraft){i.items[k].isDraft='<input type="checkbox"  checked disabled">';i.items[k].isDraftBool=true}else{i.items[k].isDraft='<input type="checkbox"  disabled>';i.items[k].isDraftBool=false}});this.setDataDataGrid(i.items)},})});