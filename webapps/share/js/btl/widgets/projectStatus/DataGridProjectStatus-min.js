define(["dojo/_base/declare","btl/widgets/base/DataGrid","dojo/_base/lang"],function(e,b,f){return e([b],{title:"",Url:"search/status",colModel:[],postMixInProperties:function a(){this.inherited(arguments);this.alfSubscribe("DATAGRID_DELETE_PROJECT_STATUS",f.hitch(this,this.deleteProjectStatus),true);this.alfSubscribe("DATAGRID_GET_PROJECT_STATUS_DATA",f.hitch(this,this.getProjectStatus),true)},deleteProjectStatus:function d(){var h=this.grid.pqGrid("selection",{type:"row",method:"getSelection"});if(h&&h.length>0){var j=h[0].rowData;var i={};i.requiresConfirmation=true;i.confirmationTitle="Удаление статуса";i.confirmationPrompt="Вы действительно хотите удалить: "+j.statusName+" ?";i.url="slingshot/datalists/list/node/"+j.nodeRef.replace("://","/");i.responseTopic="DATAGRID_DELETE_ROW_FROM_STORE",this.alfPublish("ALF_CRUD_DELETE",i,true);this.alfLog("log","alfresco_ContactPersonDataGrid__deleteContactPerson",j)}},getProjectStatus:function c(){var h=this.grid.pqGrid("selection",{type:"row",method:"getSelection"});if(h&&h.length>0){var j=h[0].rowData;var i={};i.config={};i.data=j;i.data.rowId=h[0].rowIndx;i.config.dialogTitle="formCreateProjectStatus.title.label";i.config.dialogConfirmationButtonTitle="edit.title";i.config.dialogCancellationButtonTitle="cancel.title";i.config.formSubmissionTopic="BTL_EDIT_PROJECT_STATUS";this.alfPublish("BTL_CREATE_FORM_PROJECT_STATUS",i,true)}},loadDataToDataGrid:function g(i,h){i.items.forEach(function(l,k,j){i.items[k].celColor="<div style='background: "+l.color+"; height: 14px;'></div>";if(l.name=="0"){i.items[k].statusName="Заявка"}if(l.name=="1"){i.items[k].statusName="НТС"}if(l.name=="2"){i.items[k].statusName="Утверждение"}if(l.name=="3"){i.items[k].statusName="Реализация"}if(l.name=="4"){i.items[k].statusName="Завершение"}});this.setDataDataGrid(i.items)},})});