define(["dojo/_base/declare","alfresco/forms/Form","dojo/_base/lang","dojo/dom-class","jquery"],function(c,b,g,d,e){return c([b],{cssRequirements:[{cssFile:"./css/pqgrid.css"},{cssFile:"./css/themes/Office/pqgrid.css"},{cssFile:"./css/ClassicWindow.css"},{cssFile:"./css/themes/Office/jquery-ui.css"},{cssFile:"./css/homeButton.css"},{cssFile:"/share/res/extension/css/icon.css"},{cssFile:"/share/res/extension/components/form/meetingMain.css"},{cssFile:"/share/res/extension/components/btl/windowChoiceItem/css/window_choice_item.css"}],subscriptionTopic:"BTL_DYNAMIC_FORM_UPDATE",postCreate:function f(){this.alfSubscribe(this.subscriptionTopic,g.hitch(this,this.onDynamicFormUpdate));this.inherited(arguments);d.add(this.domNode,"alfresco-forms-DynamicForm");if(!this.widgets||this.widgets.length===0){d.add(this.buttonsNode,"alfresco-forms-DynamicForm--hidden")}},formWidgetsProperty:"value",formWidetsPropertyStringified:true,formValueProperty:null,useHash:false,onDynamicFormUpdate:function a(l){var i=g.getObject(this.formWidgetsProperty,false,l);if(!i){this.alfLog("warn","No '"+this.formWidgetsProperty+"' attribute found in redraw form request payload",l,this)}else{if(this._form){this.alfLog("log","alfresco_forms_DynamicForm__onDynamicFormUpdate this._form",this._form);this._form.destroyDescendants(false)}try{if(this.okButton){this.okButton.publishPayload={}}if(this.formWidetsPropertyStringified){try{this.alfLog("log","alfresco_forms_DynamicForm__onDynamicFormUpdate",i);var h=JSON.parse(i);this.alfLog("log","alfresco_forms_DynamicForm__onDynamicFormUpdate widgets",h);this.processWidgets(h,this._form.domNode,"FIELDS");if(h.length>0){d.remove(this.buttonsNode,"alfresco-forms-DynamicForm--hidden");this.alfLog("log","alfresco_forms_DynamicForm__onDynamicFormUpdate widgets.length",h.length)}}catch(k){this.alfLog("error","The following error occurred attempting to parse a DynamicForm widget model",k,this,i)}}else{this.processWidgets(i,this._form.domNode,"FIELDS");if(i.length>0){d.remove(this.buttonsNode,"alfresco-forms-DynamicForm--hidden")}}if(this.formValueProperty){var j=g.getObject(this.formValueProperty,false,l);this.alfLog("log","alfresco_forms_DynamicForm__onDynamicFormUpdate value",j);if(j){this.setValue(j)}}if(l.formSubmissionTopic&&this.okButton){this.okButton.publishTopic=l.formSubmissionTopic}}catch(k){this.alfLog("error","An error occurred redrawing the form",k,this)}}}})});