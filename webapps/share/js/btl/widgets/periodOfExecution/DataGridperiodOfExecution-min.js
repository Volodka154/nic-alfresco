define(["dojo/_base/declare","btl/widgets/base/DataGrid","dojo/_base/lang"],function(c,a,f){return c([a],{title:"",Url:"search/periodOfExecution",colModel:[],postMixInProperties:function d(){this.inherited(arguments);this.alfSubscribe("DATAGRID_DELETE_periodOfExecution",f.hitch(this,this.deleteperiodOfExecution),true);this.alfSubscribe("DATAGRID_GET_periodOfExecution_DATA",f.hitch(this,this.getperiodOfExecutionData),true)},deleteperiodOfExecution:function b(){var h=this.grid.pqGrid("selection",{type:"row",method:"getSelection"});if(h&&h.length>0){var j=h[0].rowData;var i={};i.requiresConfirmation=true;i.confirmationTitle="Удаление типа";i.confirmationPrompt="Вы действительно хотите удалить: "+j.name+" ?";i.url="slingshot/datalists/list/node/"+j.nodeRef.replace("://","/");i.responseTopic="DATAGRID_DELETE_ROW_FROM_STORE",this.alfPublish("ALF_CRUD_DELETE",i,true);this.alfLog("log","alfresco_periodOfExecutionDataGrid__deleteperiodOfExecution",j)}},getperiodOfExecutionData:function e(){var h=this.grid.pqGrid("selection",{type:"row",method:"getSelection"});if(h&&h.length>0){var j=h[0].rowData;var i={};i.config={};i.data=j;i.data.rowId=h[0].rowIndx;i.config.dialogTitle="Редактировать";i.config.dialogConfirmationButtonTitle="edit.title";i.config.dialogCancellationButtonTitle="cancel.title";i.config.formSubmissionTopic="BTL_EDIT_periodOfExecution";this.alfPublish("BTL_CREATE_FORM_periodOfExecution",i,true)}},loadDataToDataGrid:function g(i,h){i.items.forEach(function(l,k,j){if(l.dayType=="0"){i.items[k].dayTypeName="Рабочий"}if(l.dayType=="1"){i.items[k].dayTypeName="Календарный"}if(l.taskType=="0"){i.items[k].taskTypeName="Резолюция по Входящему"}if(l.taskType=="1"){i.items[k].taskTypeName="Задание по Исходящему"}if(l.taskType=="2"){i.items[k].taskTypeName="Резолюция по Внутреннему"}if(l.taskType=="3"){i.items[k].taskTypeName="Задание по Проекту"}if(l.taskType=="4"){i.items[k].taskTypeName="Инициативное задание"}if(l.taskType=="5"){i.items[k].taskTypeName="Задание по НТД задание"}if(l.arm==true){i.items[k].star="&#9733"}else{i.items[k].star="&#9734;"}});this.setDataDataGrid(i.items)},})});