define(["dojo/_base/declare","./_MenuBar","dojo/topic","jquery","../MenuItem/AddAttachmentsMenuItem","../MenuItem/EditOfflineAttachmentsMenuItem","../MenuItem/UploadNewVersionAttachmentsMenuItem","../MenuItem/CancelEditingAttachmentsMenuItem","../MenuItem/SaveFSAttachmentsMenuItem","../MenuItem/DeleteAttachmentsMenuItem","../MenuItem/RefreshAttachmentsMenuItem","../MenuItemLink/ECPDownloadAllMenuItemLink.lib","../MenuItem/EditOnlineAttachmentsMenuItem","../MenuItem/UploadFromScanerMenuItem"],function(e,c,g,d,a,f,h,m,k,n,b,l,i,j){return e([c],{gridId:null,parentNodeRef:null,typeGrid:"jqGrid",postCreate:function(){this.inherited(arguments);this.grid=d("#"+this.gridId)},postMixInProperties:function(){this.inherited(arguments);g.subscribe("refreshAttachmentsGrid",this.refreshAttachmentsGrid.bind(this));g.subscribe(this.gridId+"_MENU_SET_STAGE_BASE",this.setStageBase.bind(this));g.subscribe(this.gridId+"_MENU_SET_STAGE_NOT_VISIBLE",this.setStageNotVisible.bind(this));g.subscribe(this.gridId+"_MENU_SET_STAGE_SELECT_ROOT_NODE",this.setStageRootNode.bind(this));g.subscribe(this.gridId+"_MENU_SET_STAGE_SELECT_BLOCKING_ROOT_NODE",this.setStageBlockingRootNode.bind(this));g.subscribe(this.gridId+"_MENU_SET_STAGE_SELECT_VERSION_NODE",this.setStageVersionNode.bind(this));g.subscribe(this.gridId+"_MENU_SET_STAGE_SELECT_SIGNED_NODE",this.setStageSignedNode.bind(this))},addButtons:function(){if(!this.readOnly){this.AddAttachments=new a({parentNodeRef:this.parentNodeRef,contentType:this.contentType});this.addChild(this.AddAttachments);this.EditOfflineAttachments=new f({gridId:this.gridId});this.addChild(this.EditOfflineAttachments);this.EditOnlineAttachments=new i({gridId:this.gridId});this.addChild(this.EditOnlineAttachments);this.UploadNewVersionAttachments=new h({gridId:this.gridId,attachmentComment:this.attachmentComment});this.addChild(this.UploadNewVersionAttachments);this.UploadFromScaner=new j({parentNodeRef:this.parentNodeRef,onlyAdmin:true});this.addChild(this.UploadFromScaner);this.CancelEditingAttachments=new m({gridId:this.gridId});this.addChild(this.CancelEditingAttachments)}this.SaveFSAttachments=new k({gridId:this.gridId});this.addChild(this.SaveFSAttachments);if(!this.readOnly){this.DeleteAttachments=new n({gridId:this.gridId});this.addChild(this.DeleteAttachments)}this.RefreshAttachments=new b({gridId:this.gridId});this.addChild(this.RefreshAttachments)},refreshAttachmentsGrid:function(o){this.setStageBase()},setStageBase:function(){this.AddAttachments&&this.AddAttachments.setVisibly(true);this.EditOfflineAttachments&&this.EditOfflineAttachments.setVisibly(false);this.UploadNewVersionAttachments&&this.UploadNewVersionAttachments.setVisibly(false);this.CancelEditingAttachments&&this.CancelEditingAttachments.setVisibly(false);this.SaveFSAttachments&&this.SaveFSAttachments.setVisibly(false);this.DeleteAttachments&&this.DeleteAttachments.setVisibly(false);this.RefreshAttachments&&this.RefreshAttachments.setVisibly(true);this.EditOnlineAttachments&&this.EditOnlineAttachments.setVisibly(false);this.UploadFromScaner&&this.UploadFromScaner.setVisibly(true)},setStageRootNode:function(){this.AddAttachments&&this.AddAttachments.setVisibly(true);this.EditOfflineAttachments&&this.EditOfflineAttachments.setVisibly(true);this.UploadNewVersionAttachments&&this.UploadNewVersionAttachments.setVisibly(true);this.CancelEditingAttachments&&this.CancelEditingAttachments.setVisibly(false);this.SaveFSAttachments&&this.SaveFSAttachments.setVisibly(true);this.DeleteAttachments&&this.DeleteAttachments.setVisibly(true);this.RefreshAttachments&&this.RefreshAttachments.setVisibly(true);this.EditOnlineAttachments&&this.EditOnlineAttachments.setVisibly(true);this.UploadFromScaner&&this.UploadFromScaner.setVisibly(true)},setStageBlockingRootNode:function(){this.AddAttachments&&this.AddAttachments.setVisibly(true);this.EditOfflineAttachments&&this.EditOfflineAttachments.setVisibly(false);this.UploadNewVersionAttachments&&this.UploadNewVersionAttachments.setVisibly(false);this.CancelEditingAttachments&&this.CancelEditingAttachments.setVisibly(true);this.SaveFSAttachments&&this.SaveFSAttachments.setVisibly(false);this.DeleteAttachments&&this.DeleteAttachments.setVisibly(false);this.RefreshAttachments&&this.RefreshAttachments.setVisibly(true);this.EditOnlineAttachments&&this.EditOnlineAttachments.setVisibly(false);this.UploadFromScaner&&this.UploadFromScaner.setVisibly(true)},setStageVersionNode:function(){this.AddAttachments&&this.AddAttachments.setVisibly(true);this.EditOfflineAttachments&&this.EditOfflineAttachments.setVisibly(false);this.UploadNewVersionAttachments&&this.UploadNewVersionAttachments.setVisibly(false);this.CancelEditingAttachments&&this.CancelEditingAttachments.setVisibly(false);this.SaveFSAttachments&&this.SaveFSAttachments.setVisibly(true);this.DeleteAttachments&&this.DeleteAttachments.setVisibly(false);this.RefreshAttachments&&this.RefreshAttachments.setVisibly(true);this.EditOnlineAttachments&&this.EditOnlineAttachments.setVisibly(false);this.UploadFromScaner&&this.UploadFromScaner.setVisibly(true)},setStageNotVisible:function(){this.AddAttachments&&this.AddAttachments.setVisibly(false);this.EditOfflineAttachments&&this.EditOfflineAttachments.setVisibly(false);this.UploadNewVersionAttachments&&this.UploadNewVersionAttachments.setVisibly(false);this.CancelEditingAttachments&&this.CancelEditingAttachments.setVisibly(false);this.SaveFSAttachments&&this.SaveFSAttachments.setVisibly(false);this.DeleteAttachments&&this.DeleteAttachments.setVisibly(false);this.RefreshAttachments&&this.RefreshAttachments.setVisibly(true);this.EditOnlineAttachments&&this.EditOnlineAttachments.setVisibly(false);this.UploadFromScaner&&this.UploadFromScaner.setVisibly(false)},setStageSignedNode:function(){this.AddAttachments&&this.AddAttachments.setVisibly(true);this.EditOfflineAttachments&&this.EditOfflineAttachments.setVisibly(false);this.UploadNewVersionAttachments&&this.UploadNewVersionAttachments.setVisibly(false);this.CancelEditingAttachments&&this.CancelEditingAttachments.setVisibly(false);this.SaveFSAttachments&&this.SaveFSAttachments.setVisibly(true);this.DeleteAttachments&&this.DeleteAttachments.setVisibly(false);this.RefreshAttachments&&this.RefreshAttachments.setVisibly(true);this.EditOnlineAttachments&&this.EditOnlineAttachments.setVisibly(false);this.UploadFromScaner&&this.UploadFromScaner.setVisibly(true)},setStageReadOnly:function(){this.AddAttachments&&this.AddAttachments.setVisibly(false);this.EditOfflineAttachments&&this.EditOfflineAttachments.setVisibly(false);this.UploadNewVersionAttachments&&this.UploadNewVersionAttachments.setVisibly(false);this.CancelEditingAttachments&&this.CancelEditingAttachments.setVisibly(false);this.SaveFSAttachments&&this.SaveFSAttachments.setVisibly(true);this.DeleteAttachments&&this.DeleteAttachments.setVisibly(false);this.RefreshAttachments&&this.RefreshAttachments.setVisibly(true);this.EditOnlineAttachments&&this.EditOnlineAttachments.setVisibly(false);this.UploadFromScaner&&this.UploadFromScaner.setVisibly(false)},setStageEditOnly:function(){this.AddAttachments&&this.AddAttachments.setVisibly(true);this.EditOfflineAttachments&&this.EditOfflineAttachments.setVisibly(true);this.UploadNewVersionAttachments&&this.UploadNewVersionAttachments.setVisibly(true);this.CancelEditingAttachments&&this.CancelEditingAttachments.setVisibly(false);this.SaveFSAttachments&&this.SaveFSAttachments.setVisibly(true);this.DeleteAttachments&&this.DeleteAttachments.setVisibly(false);this.RefreshAttachments&&this.RefreshAttachments.setVisibly(true);this.EditOnlineAttachments&&this.EditOnlineAttachments.setVisibly(true);this.UploadFromScaner&&this.UploadFromScaner.setVisibly(true)}})});