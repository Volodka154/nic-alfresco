define(["dojo/_base/declare","dijit/_WidgetBase","dojo/topic","jquery"],function(c,b,a,d){return c([b],{idPosition:"",postMixInProperties:function(){this.inherited(arguments);a.subscribe("SELECT_ROW_ATTACHMENTS_TREE_GRID",this.filePreview.bind(this))},filePreview:function(i){var g=i.nodeRef,f=i.name,j=i.webDavURL,h=this.idPosition,e="/share/proxy/alfresco/createReview?cardId=";var k=e+j;if(i.currentVersionLabel&&i.versionLabel&&i.currentVersionLabel==i.versionLabel&&i.preview){k="/share/page/btl-filePreview?nodeRef="+j}if(document.getElementById(h)){document.getElementById(h).innerHTML='<iframe id="iframe" width="100%" height="1000" src="'+k+'">';d("#iframe").load(function(n){var m=d("#iframe")[0];var l=m.contentDocument.title;if(l.indexOf("500")>=0){document.getElementById(h).innerHTML='Для данного файла предпросмотр недоступен. <a style="color: blue;"  href="/share/proxy/alfresco/slingshot/node/'+g.replace("://","/")+"/content/"+f+'?a=true">Для загрузки нажмите здесь.</a>'}})}}})});