define(["dojo/_base/declare","alfresco/core/Core","alfresco/core/CoreXhr","meeting/tableView/tableView","meeting/utils/base","dijit/_WidgetBase","dojo/_base/lang"],function(b,g,c,a,e,d,f){return b([a],{idStoreMeeting:"MEETING_STORE",postCreate:function(){this.inherited(arguments);this.getNegotiationTableData()},getNegotiationTableData:function(){var h=e.getStoreById(this.idStoreMeeting);_this=this;Alfresco.util.Ajax.jsonGet({method:"GET",url:"/share/proxy/alfresco/negotiation/get-negotiation-result-data?documentNodeRef="+h.nodeRef,successCallback:{fn:function j(k){if(k.serverResponse.status==200){_this.setTableBody(_this.getNegotiationTableBody(k.json.negotiationResults))}else{console.log("Error getting negotiation list")}},scope:this}})},getNegotiationTableBody:function(j){var h="";for(i=0;i<j.length;i++){if(j[i].state=="Согласован"||j[i].state=="Подписан"||j[i].state=="На регистрации"||j[i].state=="Согласован с замечаниями"){h+="<tr style='background-color: #d6e9c6'>"}else{if(j[i].state=="Отклонен"){h+="<tr style='background-color: #FFA9A9'>"}else{if(j[i].state=="На согласование"||j[i].state=="На подписание"){h+="<tr style='background-color: #FCECD3'>"}else{if(j[i].state=="Отменен"){h+="<tr style='background-color: #C6C6C6'>"}else{if(j[i].state=="Не визирован"){h+="<tr style='background-color: #FFFFFF'>"}else{h+="<tr>"}}}}}h+="<td>"+j[i].levelName+"</td>";h+="<td>"+j[i].fullName+"</td>";h+="<td style='width:70px;'>"+j[i].levelEndDate+"</td>";h+="<td style='width:70px;'>"+j[i].actualNegotiationDate+"</td>";h+="<td>"+j[i].state+"</td>";h+="<td>"+j[i].cycle+"</td>";h+="<td>"+j[i].file+"</td>";h+="<td>"+j[i].negotiatorComment+"</td>";h+="</tr>"}return h},headData:[{style:"width:170px",label:"Этап"},{style:"width:250px",label:"ФИО"},{style:"width:100px",label:"До"},{style:"width:100px",label:"Дата"},{style:"width:100px",label:"Статус"},{style:"width:60px",label:"Круг"},{style:"width:60px",label:"Файл"},{style:"width:150px",label:"Комментарий"}]})});