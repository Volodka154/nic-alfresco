define(["dojo/_base/declare","alfresco/core/Core","../../../grids/_Grid","dojo/_base/lang","alfresco/core/CoreXhr","meeting/utils/base"],function(b,f,a,e,c,d){return b([a],{Url:"/search/meetingRooms",flexHeight:true,height:430,loadData:true,resizable:false,colModel:[{title:"nodeRef",width:100,dataType:"string",dataIndx:"nodeRef",hidden:true},{title:"Номер",width:50,dataType:"string",dataIndx:"number"},{title:"Ответственный",width:240,dataType:"string",dataIndx:"responsible"},{title:"responsible_ref",width:50,dataType:"string",dataIndx:"responsible_ref",hidden:true},{title:"confirmationRequired",width:50,dataType:"string",dataIndx:"confirmationRequired",hidden:true},{title:"*",width:20,dataType:"string",dataIndx:"_confirmationRequired"}],loadDataToDataGrid:function(h,g){h.items.forEach(function(l,k,j){if(l.confirmationRequired==true){h.items[k]["_confirmationRequired"]="*"}});this.setDataDataGrid(h.items)},postMixInProperties:function(){this.inherited(arguments)},rowClick:function(g,h){if(h.rowData.confirmationRequired&&(typeof selectedRoomId=="undefined"||(h.rowData.nodeRef!=selectedRoomId))){this.alfPublish("ALF_DISPLAY_PROMPT",{message:"Для данной переговорной требуется подтверждение ответственного",title:"Внимание"},true)}selectedRoomId=h.rowData.nodeRef;this.alfPublish("LOAD_CALENDAR_ROOM",{room:h.rowData.nodeRef,roomContent:h.rowData.number,roomObject:h.rowData},true);this.alfPublish("ENABLE_DATE_CONTROL",null,true)},setEventsDataGrid:function(){var g=this;this.grid.pqGrid({rowClick:this.rowClick.bind(this)})}})});