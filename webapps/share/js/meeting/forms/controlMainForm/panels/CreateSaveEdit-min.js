define(["dojo/_base/declare","meeting/forms/_DynamicForm","dojo/_base/lang","meeting/utils/base","../buttons/Create","../buttons/Update","../buttons/UpdateAndClose"],function(b,a,d,c){return b([a],{state:"",path:"meeting/forms/controlMainForm/",postCreate:function(){this.inherited(arguments);this.alfSubscribe("CHANGE_STATE_MEETING_DOCUMENT",d.hitch(this,this.setState),true);if(!this.state&&this.storeId){var e=c.getStoreById(this.storeId);if(e.document){this.state=e.state}}this.setState({state:this.state})},setState:function(f){if(f.state){var e=[{name:this.path+"buttons/Update"}];e.push({name:this.path+"buttons/UpdateAndClose"});e.push({name:this.path+"buttons/Cancel"});this.onDynamicFormUpdate({value:JSON.stringify(e)})}else{var e=[{name:this.path+"buttons/Create"}];e.push({name:this.path+"buttons/Cancel"});this.onDynamicFormUpdate({value:JSON.stringify(e)})}}})});