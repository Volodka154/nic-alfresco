define(["dojo/_base/declare","meeting/forms/_DynamicForm","dijit/_TemplatedMixin","dojo/text!./templates/Links.html","meeting/utils/base","alfresco/core/topics","dojo/_base/lang"],function(b,a,d,c,e,g,f){return b([a,d],{templateString:c,state:"",postMixInProperties:function(){this.uid=Math.random().toString(36).substr(2,9)+"-grid-version-link";this.uidGrid=this.uid+"_links-grid";this.inherited(arguments)},postCreate:function(){this.alfSubscribe("CHANGE_STATE_MEETING_DOCUMENT",f.hitch(this,this.setState),true);if(this.storeId){var h=e.getStoreById(this.storeId);if(h.document){this.documentNodeRef=h.nodeRef;this.state=h.state}}this.widgets=[{name:"meeting/forms/controlLinksForm/menus/MainMenuBar",config:{storeId:this.storeId,gridId:this.uidGrid,documentNodeRef:this.documentNodeRef}},{name:"alfresco/forms/ControlRow",config:{widgets:[{name:"meeting/layout/ClassicWindow",config:{title:"Ссылки:",type:"primary",widgets:[{name:"meeting/forms/controlLinksForm/Grid/LinksGrid",config:{documentNodeRef:this.documentNodeRef,uidGrid:this.uidGrid}},]}}]}}];this.inherited(arguments);this.setState({state:this.state,access:this.access})},setState:function(h){this.state=h.state;if(h.nodeRef){this.documentNodeRef=h.nodeRef}switch(this.state){case"":break;default:if(this.documentNodeRef){this.renderAttach()}else{console.error("Не удалось получить NodeRef документа")}break}},renderAttach:function(){}})});