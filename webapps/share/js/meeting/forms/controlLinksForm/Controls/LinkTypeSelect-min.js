define(["dojo/_base/declare","alfresco/forms/controls/Select","meeting/utils/base","alfresco/core/CoreXhr","alfresco/core/ResizeMixin","dojo/_base/lang"],function(b,h,f,c,e,g){return b([h,c,e],{label:"Тип ссылки",name:"assoc_btl-link_linkType",additionalCssClasses:"width300",optionsConfig:{fixed:[{value:" ",label:" ",disabled:true}],fieldId:"LINK_TYPE_SELECT"},postMixInProperties:function(){this.alfSubscribe("BTL_LINK_OBJECT_TYPE_CHANGED",g.hitch(this,this.changeSource,true),true);if(this.objectType!=""){this.changeSource(false,this.objectType)}this.alfDisabled(this.value=="");this.inherited(arguments)},changeSource:function a(i,j){if(i){if(this.wrappedWidget){this.wrappedWidget.value=null}this.alfDisabled(false)}this.serviceXhr({url:"/share/proxy/alfresco/filters/link-type-list?doc="+this.rootNodeRef+"&linkType="+j,method:"GET",successCallback:function(k){if(this.wrappedWidget){this.wrappedWidget.options=[]}if(k.cnt_whole>0){for(var l=0;l<k.cnt_whole;l++){this.addOption({value:k.result[l].nodeRef,label:k.result[l].name})}}else{this.addOption({value:" ",label:" ",disabled:true})}this.setValue(this.value);this.options=this.wrappedWidget.options},callbackScope:this})},validate:function d(){if(this.deferValueAssigment){}else{if(this.validationConfig&&ObjectTypeUtils.isArray(this.validationConfig)){this.startValidation()}else{var i=this.processValidationRules();if(i&&this.wrappedWidget.value!=null&&this.wrappedWidget.value!=" "){this.alfPublish("ALF_VALID_CONTROL",{name:this.name,fieldId:this.fieldId});this.hideValidationFailure()}else{this.alfPublish("ALF_INVALID_CONTROL",{name:this.name,fieldId:this.fieldId});this.showValidationFailure()}}}},})});