gantt.date.date_to_str=function(a,b){return function(c){return a.replace(/%[a-zA-Z]/g,function(d){switch(d){case"%d":return b?gantt.date.to_fixed(c.getUTCDate()):gantt.date.to_fixed(c.getDate());case"%m":return b?gantt.date.to_fixed(c.getUTCMonth()+1):gantt.date.to_fixed(c.getMonth()+1);case"%j":return b?c.getUTCDate():c.getDate();case"%n":return b?c.getUTCMonth()+1:c.getMonth()+1;case"%y":return b?gantt.date.to_fixed(c.getUTCFullYear()%100):gantt.date.to_fixed(c.getFullYear()%100);case"%Y":return b?c.getUTCFullYear():c.getFullYear();case"%D":return b?gantt.locale.date.day_short[c.getUTCDay()]:gantt.locale.date.day_short[c.getDay()];case"%l":return b?gantt.locale.date.day_full[c.getUTCDay()]:gantt.locale.date.day_full[c.getDay()];case"%M":return b?gantt.locale.date.month_short[c.getUTCMonth()]:gantt.locale.date.month_short[c.getMonth()];case"%F":return b?gantt.locale.date.month_full[c.getUTCMonth()]:gantt.locale.date.month_full[c.getMonth()];case"%h":return b?gantt.date.to_fixed((c.getUTCHours()+11)%12+1):gantt.date.to_fixed((c.getHours()+11)%12+1);case"%g":return b?(c.getUTCHours()+11)%12+1:(c.getHours()+11)%12+1;case"%G":return b?c.getUTCHours():c.getHours();case"%H":return b?gantt.date.to_fixed(c.getUTCHours()):gantt.date.to_fixed(c.getHours());case"%i":return b?gantt.date.to_fixed(c.getUTCMinutes()):gantt.date.to_fixed(c.getMinutes());case"%a":return b?c.getUTCHours()>11?"pm":"am":c.getHours()>11?"pm":"am";case"%A":return b?c.getUTCHours()>11?"PM":"AM":c.getHours()>11?"PM":"AM";case"%s":return b?gantt.date.to_fixed(c.getUTCSeconds()):gantt.date.to_fixed(c.getSeconds());case"%W":return b?gantt.date.to_fixed(gantt.date.getUTCISOWeek(c)):gantt.date.to_fixed(gantt.date.getISOWeek(c));default:return d}})}},gantt.date.str_to_date=function(a,b){return function(c){for(var h=[0,0,1,0,0,0],e=c.match(/[a-zA-Z]+|[0-9]+/g),d=a.match(/%[a-zA-Z]/g),f=0;f<d.length;f++){switch(d[f]){case"%j":case"%d":h[2]=e[f]||1;break;case"%n":case"%m":h[1]=(e[f]||1)-1;break;case"%y":h[0]=1*e[f]+(e[f]>50?1900:2000);break;case"%g":case"%G":case"%h":case"%H":h[3]=e[f]||0;break;case"%i":h[4]=e[f]||0;break;case"%Y":h[0]=e[f]||0;break;case"%a":case"%A":h[3]=h[3]%12+("am"==(e[f]||"").toLowerCase()?0:12);break;case"%s":h[5]=e[f]||0;break;case"%M":h[1]=gantt.locale.date.month_short_hash[e[f]]||0;break;case"%F":h[1]=gantt.locale.date.month_full_hash[e[f]]||0}}return b?new Date(Date.UTC(h[0],h[1],h[2],h[3],h[4],h[5])):new Date(h[0],h[1],h[2],h[3],h[4],h[5])}};